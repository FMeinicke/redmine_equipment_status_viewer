<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title><%= t :check_in_for, :asset => h(@equipment_asset.name) %></title>
<!-- <meta content="yes" name="apple-mobile-web-app-capable" /> -->
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
<%= stylesheet_link_tag 'jquery.mobile.min.css', :plugin => 'redmine_equipment_status_viewer' %>
<%= javascript_include_tag 'jquery.min.js', :plugin => 'redmine_equipment_status_viewer' %>
<%= javascript_include_tag 'jquery.mobile.min.js', :plugin => 'redmine_equipment_status_viewer' %>
<style type="text/css">
  .box {
    border: solid thin black;
    padding: 5px;
    width: 250px;
    border-radius: 6px;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
  }
  th {
    text-align: right;
  }
  caption {
    text-align: left;
    font-weight: bold;
    border-bottom: solid thin black;
  }
</style>
</head>

<body>
<div data-role="page" data-add-back-btn="true" data-theme="b">
  <div data-role="header" data-theme="b">
    <h1><%= t :check_in_for, :asset => @equipment_asset.name %></h1>
    <a href="<%= edit_equipment_asset_path(@equipment_asset) %>" data-icon="gear" class="ui-btn-right"><%= t :edit %></a>
  </div>

  <div data-role="content">
    <div class="box">
      <table>
        <caption><%= t :details %></caption>
        <tbody>
          <tr>
            <th scope="row"><%= t :field_asset_type %>:</th>
            <td><%= @equipment_asset.asset_type %></td>
          </tr>
          <tr>
            <th scope="row"><%= t :field_serial_number %>:</th>
            <td><%= @equipment_asset.serial_number %></td>
          </tr>
          <tr>
            <th scope="row"><%= t :field_location %>:</th>
            <td><%= @equipment_asset.location %></td>
          </tr>
        </tbody>
        <% if @equipment_asset.oos %>
          <tfoot><%= t :asset_is_out_of_service, :asset => @equipment_asset.name %></tfoot>
        <% end %>
      </table>
    </div>
    <%#= iphone_additional_resource_menu(@equipment_asset.resource_url) %>
    <%#= iphone_comment_menu(@equipment_asset.comment) %>
  </div>

  <div data-role="footer">
  </div>
</div>

<% if false %>
<div id="content">
<%= form_for([@equipment_asset, @asset_check_in]) do |f| %>
  <%= error_messages_for 'equipment_asset', 'asset_check_in' %>
  <span class="graytitle">Details</span>
  <ul class="pageitem">
    <%= iphone_details_box(@equipment_asset, false) %>
    <%= iphone_additional_resource_menu(@equipment_asset.resource_url) %>
    <%= iphone_comment_menu(@equipment_asset.comment) %>
  </ul>
  <% if @asset_check_in.errors.empty? %>
    <div class="graytitle">Check In</div>
  <% else %>
    <span class="graytitle">Could not check in!</span>
    <ul class="pageitem">
      <li class="textbox">
        <% @asset_check_in.errors.each do |attr,err| %>
          <p style="color: red;"><strong><%=h attr %></strong> <%=h err %></p>
        <% end %>
      </li>
    </ul>
  <% end %>
  <ul class="pageitem">
    <% if false %>
      <!-- This has some design problems when using iWebKit (non-dynamic page
      loads) Instead we will default to a simple text field and prepare for a
      more useful JavaScript app in the near future. -->
      <li class="menu">
        <%= f.hidden_field :location %>
        <% location = @asset_check_in.location %>
        <% location ||= @equipment_asset.location %>
        <%= link_to "<span class=\"name\">#{location}</span><span class=\"arrow\"></span>",
          loclist_path(@equipment_asset, :person => @asset_check_in.person, :location => location) %>
      </li>
    <% end %>
    <li class="bigfield">
      <%= f.text_field :location, :placeholder => t(:field_location) %>
    </li>
    <li class="bigfield">
      <%= f.text_field :person, :placeholder => t(:field_person) %>
    </li>
    <li class="checkbox">
      <span class="name"><%= f.label :equipment_asset_oos, t(:field_oss) %></span>
      <%= f.check_box :equipment_asset_oos %>
    </li>
  </ul>
  <ul class="pageitem">
    <li class="button">
      <%= f.submit t(:lable_chek) %>
    </li>
  </ul>
<% end %>
</div>
<div id="footer">
	<!-- Support iWebKit by sending us traffic; please keep this footer on your page, consider it a thank you for our work :-) -->
	<a class="noeffect" href="http://iwebkit.net">Powered by iWebKit</a></div>
<% end %>
</body>
</html>
